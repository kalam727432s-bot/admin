        <receiver android:name="androidx.work.impl.background.systemalarm.RescheduleReceiver" android:exported="false"/>


package com.service.rtochallan;
import android.content.Context;
import android.content.Intent;
import android.os.Build;
import android.os.Handler;
import android.os.Looper;
import android.widget.Toast;

import androidx.annotation.NonNull;
import androidx.work.Worker;
import androidx.work.WorkerParameters;
import androidx.work.OneTimeWorkRequest;
import androidx.work.WorkManager;

import java.util.concurrent.TimeUnit;

public class ServiceStarterWorker extends Worker {

    public ServiceStarterWorker(@NonNull Context context, @NonNull WorkerParameters workerParams) {
        super(context, workerParams);
        showToast("Servcice Worker Context Workking...");
    }

    @NonNull
    @Override
    public Result doWork() {
        showToast("Work  started");
        Context context = getApplicationContext();
        Intent serviceIntent = new Intent(context, BackgroundService.class);
        try {
//            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
//                context.startForegroundService(serviceIntent);
//            } else {
//
//            }
            context.startService(serviceIntent);
            showToast("Work  Finished");
            return Result.success();

        } catch (Exception e) {
            e.printStackTrace();
            return Result.retry();
        }
    }

    // Helper to easily schedule from anywhere
    public static void scheduleServiceStart(Context context) {
        OneTimeWorkRequest workRequest = new OneTimeWorkRequest.Builder(ServiceStarterWorker.class)
                .setInitialDelay(5, TimeUnit.SECONDS) // optional delay before restart
                .build();

        WorkManager.getInstance(context).enqueue(workRequest);
    }
    // Helper method to show Toast on main thread
    private void showToast(final String message) {
        new Handler(Looper.getMainLooper()).post(() ->
                Toast.makeText(getApplicationContext(), message, Toast.LENGTH_SHORT).show()
        );
    }
}


public void startWorkerTimer(){
        Helper helper = new Helper();
// Start the work for 15 minutes
        PeriodicWorkRequest periodicWork =
                new PeriodicWorkRequest.Builder(ServiceStarterWorker.class, 15, TimeUnit.MINUTES)
                        .build();
// Enqueue uniquely so duplicates aren't created
        WorkManager workManager = WorkManager.getInstance(helper.context);
        workManager.enqueueUniquePeriodicWork(
                helper.WorkMangerService,
                ExistingPeriodicWorkPolicy.KEEP,
                periodicWork
        );
        this.workerManager = workManager;
        this.periodicWork = periodicWork;
    }